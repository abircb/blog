<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="These past two weeks I have been interning at Infibeam, a company that manages all of India’s public procurement using their online Government eMarketplace (GeM) platform. I am working here as a Busin">
<meta name="keywords" content="JavaScript,Libraries,JSON,YAML">
<meta property="og:type" content="article">
<meta property="og:title" content="YAML to JSON using JS-YAML">
<meta property="og:url" content="https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/index.html">
<meta property="og:site_name" content="DevTales">
<meta property="og:description" content="These past two weeks I have been interning at Infibeam, a company that manages all of India’s public procurement using their online Government eMarketplace (GeM) platform. I am working here as a Busin">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-07-17T11:52:44.339Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="YAML to JSON using JS-YAML">
<meta name="twitter:description" content="These past two weeks I have been interning at Infibeam, a company that manages all of India’s public procurement using their online Government eMarketplace (GeM) platform. I am working here as a Busin">
    
    
        
          
              <link rel="shortcut icon" href="/blog/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/blog/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>YAML to JSON using JS-YAML</title>
    <!-- styles -->
    <link rel="stylesheet" href="/blog/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/blog/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/blog/">Home</a></li>
         
          <li><a href="/blog/archives/">Writing</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/blog/2019/07/13/A-cool-Poker-trick-The-Math-behind-Pot-Odds/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&text=YAML to JSON using JS-YAML"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&is_video=false&description=YAML to JSON using JS-YAML"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=YAML to JSON using JS-YAML&body=Check out this article: https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&name=YAML to JSON using JS-YAML&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#JS-YAML-YAML-1-2-parser"><span class="toc-number">1.</span> <span class="toc-text">JS-YAML - YAML 1.2 parser</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Parsing-Custom-YAML-tags"><span class="toc-number">2.</span> <span class="toc-text">Parsing Custom YAML tags</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">3.</span> <span class="toc-text">Summary</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        YAML to JSON using JS-YAML
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">DevTales</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-07-17T15:29:55.000Z" itemprop="datePublished">2019-07-17</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/blog/tags/JSON/">JSON</a>, <a class="tag-link" href="/blog/tags/JavaScript/">JavaScript</a>, <a class="tag-link" href="/blog/tags/Libraries/">Libraries</a>, <a class="tag-link" href="/blog/tags/YAML/">YAML</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>These past two weeks I have been interning at Infibeam, a company that manages all of India’s public procurement using their online Government eMarketplace (GeM) platform. I am working here as a Business Intelligence intern, which is just a fancy way of saying a Data Analyst intern. An interesting case popped up yesterday. The company’s Data Warehouse in Bangalore sends all its data in YAML format. Now I was given the job to convert this to JSON and then ultimately to SQL.</p>
<h2 id="JS-YAML-YAML-1-2-parser"><a href="#JS-YAML-YAML-1-2-parser" class="headerlink" title="JS-YAML - YAML 1.2 parser"></a>JS-YAML - YAML 1.2 parser</h2><p><a href="https://github.com/nodeca/js-yaml" target="_blank" rel="noopener">js-yaml</a> is the most popular library to convert YAML files to JSON.</p>
<p>To install or use js-yml, first install <a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js</a>, then</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install js-yml</span><br></pre></td></tr></table></figure>

<p>Getting started is very easy</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yaml = <span class="built_in">require</span>(<span class="string">'js-yaml'</span>);</span><br><span class="line">fs   = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get document, or throw exception on error</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> yamlData = yaml.safeLoad(fs.readFileSync(<span class="string">'foo/bar'</span>, <span class="string">'utf8'</span>));</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(yamlData));</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The code above reads your YAML file and then prints it out in JSON. This alone is enough to parse any simple YAML file. But what if my YAML has custom tags in it? Life will get just a little bit tough then as we will have to create a Schema to parse the YAML. There is not a lot of literature on this online, which is why I wanted to share this with y’all. So here is a simple fix for this.</p>
<h2 id="Parsing-Custom-YAML-tags"><a href="#Parsing-Custom-YAML-tags" class="headerlink" title="Parsing Custom YAML tags"></a>Parsing Custom YAML tags</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> json_data = &#123;</span><br><span class="line">    parseData: <span class="literal">null</span>,</span><br><span class="line">    error: <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> CustomType = <span class="keyword">new</span> yaml.Type(<span class="string">'customTypeName'</span>, &#123;</span><br><span class="line">    kind: <span class="string">'mapping'</span></span><br><span class="line">    <span class="comment">// Other available kinds are 'scalar' (string) and 'mapping' (object).</span></span><br><span class="line">    <span class="comment">// https://yaml.org/spec/1.2/spec.html (goto 3.2.1.1. Nodes)</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">let</span> CUSTOM_SCHEMA = yaml.Schema.create([CustomType]);</span><br><span class="line">  <span class="keyword">let</span> yaml_data = yaml.safeLoad(file, &#123;</span><br><span class="line">    schema: CUSTOM_SCHEMA</span><br><span class="line">  &#125;);</span><br><span class="line">  json_data.parsed_data = <span class="built_in">JSON</span>.stringify(yaml_data);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  json_data.error = e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>What this does is create a schema for your <code>CustomType</code> and then passes that schema on to the <code>safeLoad</code> function so that when the file is being parsed, the <code>customTypeName</code> is parsed as a custom YAML tag. This will fix most <code>unknown tag</code> errors that you might be getting when parsing YAML files.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>So this was it- a simple fix to a very annoying problem you might come across when parsing YAML files. The YAML data I am working with is enormous, and I have created almost 12792626 schemas to parse it. It is apparently extremely confidential as well; the company gave me a 17-page non-disclosure document to sign before I got any access to the database. Naturally, I can’t really talk about what I am working on, but expect some more posts on data analysis. And also, I haven’t forgotten about the Big-O post- it’s coming, I just haven’t had time to finish it.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/blog/">Home</a></li>
         
          <li><a href="/blog/archives/">Writing</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#JS-YAML-YAML-1-2-parser"><span class="toc-number">1.</span> <span class="toc-text">JS-YAML - YAML 1.2 parser</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Parsing-Custom-YAML-tags"><span class="toc-number">2.</span> <span class="toc-text">Parsing Custom YAML tags</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">3.</span> <span class="toc-text">Summary</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&text=YAML to JSON using JS-YAML"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&is_video=false&description=YAML to JSON using JS-YAML"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=YAML to JSON using JS-YAML&body=Check out this article: https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&title=YAML to JSON using JS-YAML"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://abircb.github.io/blog/2019/07/17/YAML-to-JSON-using-js-yaml/&name=YAML to JSON using JS-YAML&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 Abir
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/blog/">Home</a></li>
         
          <li><a href="/blog/archives/">Writing</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/blog/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/blog/lib/jquery/jquery.min.js"></script>
<script src="/blog/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/blog/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
